<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.7" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TALCS: Introducing TALCS into Audio Applications</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
 <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" /> <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="extra-stylesheet.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
    </script>
</head>
<body>
        <div id="top">
            <!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr id="projectrow">
                            <td id="projectalign">
                                <div id="projectname">TALCS
                                    <span id="projectnumber">&#160;0.0.1.1</span>
                                </div>
                                <div id="projectbrief">TALCS: Audio Library of CrSjimo</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part --><!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__c_1_2_users_2_crs__1_2diffscope_2libs_2talcs_2doc_204__introducing__talcs__into__audio__applications.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Introducing TALCS into Audio Applications</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3"></a> <img src="https://raw.githubusercontent.com/CrSjimo/talcs/main/doc/talcs_in_diffscope.svg" alt="TALCS in DiffScope" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Dealing with drivers and devices</h1>
<p>The static member function <a class="el" href="classtalcs_1_1_audio_driver_manager.html#a724ac1748148af6347672eab2ad2badd">AudioDriverManager::createBuiltInDriverManager</a>() can be used to create an <a class="el" href="classtalcs_1_1_audio_driver_manager.html">AudioDriverManager</a> that supports the built-in SDL drivers. After the creation of the built-in audio manager, list all driver modes for the user to select. Then, get the specified <a class="el" href="classtalcs_1_1_audio_driver.html">AudioDriver</a> object.</p>
<p>Only after the initialization can audio devices be listed and created. Once an <a class="el" href="classtalcs_1_1_audio_device.html">AudioDevice</a> object is created, the information about supported buffer sizes and sample rates can be used to configure the audio application and open the device.</p>
<p>To start the device, you need an AudioDevicePlayback object to produce audio blocks to feed the device. In practice, <a class="el" href="classtalcs_1_1_audio_source_playback.html">AudioSourcePlayback</a> is usually used, which feeds the device with the audio block produced by an AudioSource on each callback.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Combining different components within a project scope</h1>
<p>The AudioSource object that directly connects to the device is usually MixerAudioSource in practice, which mixes multiple audio sources from different project scopes. Within a single project scope, a TransportAudioSource object is usually directly connected to the MixerAudioSource. Then, all successor sources are <a class="el" href="classtalcs_1_1_positionable_audio_source.html">PositionableAudioSource</a>.</p>
<p>First, let's dive deeper into <a class="el" href="classtalcs_1_1_positionable_mixer_audio_source.html">IMixer</a>, the interface that <a class="el" href="classtalcs_1_1_mixer_audio_source.html">MixerAudioSource</a> and <a class="el" href="classtalcs_1_1_positionable_mixer_audio_source.html">PositionableMixerAudioSource</a> implements. The <a class="el" href="structtalcs_1_1_i_mixer.html">IMixer</a> object reads from a list of audio sources, "mixes" these audio blocks to one, applies gain and pan to it, produces it out, and meanwhile signals the magnitude of the audio block processed. For the quoted term "mix", it could either be "mix together each channel in all input sources" (when <a class="el" href="structtalcs_1_1_i_mixer.html#a6aa5ac9fb04da7d30a3d65cd893ae8f4">IMixer::routeChannels</a>() == false) or "arrange all channels in each source one by one" (when <a class="el" href="structtalcs_1_1_i_mixer.html#a6aa5ac9fb04da7d30a3d65cd893ae8f4">IMixer::routeChannels</a>() == true).</p>
<p><img src="https://raw.githubusercontent.com/CrSjimo/talcs/main/doc/imixer.svg" alt="IMixer Diagram" style="pointer-events: none;" class="inline"/></p>
<p><a class="el" href="structtalcs_1_1_i_mixer.html">IMixer</a> can also set an input source to solo (using <a class="el" href="structtalcs_1_1_i_mixer.html#ae8137cd8018f723807ab1254fec863e3">IMixer::setSourceSolo</a>()) or mute the output (using <a class="el" href="structtalcs_1_1_i_mixer.html#ad06492f0579f68f73a3a1632347fbf48">IMixer::setSilentFlags</a>()). By combining <a class="el" href="classtalcs_1_1_positionable_mixer_audio_source.html">PositionableMixerAudioSource</a> objects within a project scope, you can create the track layout.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Arranging Clips in a Track</h1>
<p>A TALCS audio application is supposed to have two types of audio clips: the audio clip that immediately produces audio, and the audio clip that produces audio after loading. Currently, TALCS does not support the audio clip that streamingly loads audio and produces it.</p>
<p>For the first one, <a class="el" href="classtalcs_1_1_audio_source_clip_series.html">AudioSourceClipSeries</a> is used. If the track is an audio track, add <a class="el" href="classtalcs_1_1_audio_format_input_source.html">AudioFormatInputSource</a> clips to the series. The AudioFormatInputSource object reads audio from AudioFormatIO and produces it. Note that compared with other object connections, one <a class="el" href="classtalcs_1_1_audio_format_i_o.html">AudioFormatIO</a> can be set to multiple <a class="el" href="classtalcs_1_1_audio_format_input_source.html">AudioFormatInputSource</a> objects.</p>
<p>For the second one, <a class="el" href="classtalcs_1_1_future_audio_source_clip_series.html">FutureAudioSourceClipSeries</a> is used. A <a class="el" href="classtalcs_1_1_future_audio_source_clip_series.html">FutureAudioSourceClipSeries</a> series takes multiple <a class="el" href="classtalcs_1_1_future_audio_source.html">FutureAudioSource</a> clips as input. In practice, these sources are manipulated by the synthesis engine using <a href="https://doc.qt.io/qt-5/qfuture.html">QFuture</a> APIs.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Exporting Audio to File</h1>
<p>The <a class="el" href="classtalcs_1_1_audio_source_writer.html">AudioSourceWriter</a> object provides functionalities to write the audio produced by an <a class="el" href="classtalcs_1_1_audio_source.html">AudioSource</a> to an <a class="el" href="classtalcs_1_1_audio_format_i_o.html">AudioFormatIO</a> object. To export the project to an audio file, you should detach the <a class="el" href="classtalcs_1_1_positionable_audio_source.html">PositionableAudioSource</a> that acts as the master track, connect it to an writer, runs the writer, and reconnect the master track.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
VST Mode Audio Playback</h1>
<p>In standalone mode, the audio is played to a physical audio device. In VST Mode, the remote audio context running in the VST plugin can be treated as a virtual audio device. On each audio block to be processed in the remote audio context, it reads audio from a RemoteAudioSource object (extends <a href="https://docs.juce.com/master/classAudioSource.html">juce::AudioSource</a>), then the RemoteAudioSource object tells the <a class="el" href="classtalcs_1_1_remote_audio_device.html">RemoteAudioDevice</a> to get the audio from an <a class="el" href="classtalcs_1_1_audio_device_callback.html">AudioDeviceCallback</a> and returns to the source via the RPC connection.</p>
<p>Additionally, on each audio block to be processed in the remote audio context, it also transmits a <a class="el" href="structtalcs_1_1_remote_audio_device_1_1_process_info.html">ProcessInfo</a> struct, and <a class="el" href="classtalcs_1_1_remote_audio_device_1_1_process_info_callback.html">ProcessInfoCallback</a> callback functions will be called to handle the information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
